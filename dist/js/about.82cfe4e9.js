(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"12b6":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Archive")]),e.user?r("button",{on:{click:e.newArticle}},[e._v("+ New Article")]):e._e(),e._v(" "),r("br"),r("br"),e.admin?r("button",{on:{click:e.applications}},[e._v("View Applications")]):e._e(),r("ArchiveList",{attrs:{user:e.user}})],1)},n=[],a=r("22b8"),c=r("9c4f"),s={name:"Archive",components:{ArchiveList:a["a"]},props:{user:Object},methods:{newArticle:function(){var e=this,t={name:"",title:"",category:"Satire",brief:"",image:"",text:"Start writing here..."},r=c["a"]+"/articles/";this.axios.post(r,t).then((function(t){var r=t.data.article;if(r){var i=r._id;e.$router.push({name:"write",params:{id:i}})}else console.log("Error")})).catch((function(e){console.log("Server error: "+e.response.data)}))},applications:function(){this.$router.push({name:"applications"})}},computed:{admin:function(){return this.user&&this.user.admin}}},o=s,l=r("2877"),u=Object(l["a"])(o,i,n,!1,null,null,null);t["default"]=u.exports},"22b8":function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"archive-list"},[r("ArchiveFilter",{staticClass:"filter",on:{filter:e.filter,search:e.search,clear:e.clear}}),e._l(e.articles,(function(t){return r("ArticleItem",{key:t.id,attrs:{user:e.user,article:t}})}))],2)},n=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"article-item"},[r("div",{staticClass:"item-child"},[r("img",{attrs:{src:e.article.image},on:{click:e.go}})]),r("div",{staticClass:"item-child",on:{click:e.go}},[r("span",{staticClass:"title"},[e._v(e._s(e.article.title))]),r("p",{staticClass:"brief"},[e._v(e._s(e.article.brief))])]),e.editRights?r("div",{staticClass:"item-child"},[r("button",{on:{click:e.write}},[e._v("Edit")]),e.suggestPublication?r("span",[e._v("Publication requested")]):e._e()]):e._e()])},c=[],s=(r("b0c0"),r("d3b7"),r("25f0"),{name:"ArticleItem",props:{article:Object,user:Object},computed:{articleLink:function(){return"/article/"+this.article.name},editRights:function(){return!!this.user&&(!!this.user.admin||this.user._id.toString()==this.article.author.toString())},writeLink:function(){return"/write/"+this.article._id},suggestPublication:function(){return this.article.requested&&!this.article.public}},methods:{go:function(){this.$router.push({name:"article",params:{name:this.article.name}})},write:function(){this.$router.push({name:"write",params:{id:this.article._id}})}}}),o=s,l=(r("3c13"),r("2877")),u=Object(l["a"])(o,a,c,!1,null,"5a61d6f0",null),h=u.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedMonth,expression:"selectedMonth"}],on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedMonth=t.target.multiple?r:r[0]},function(t){return e.filter()}]}},[r("option",{attrs:{disabled:"",value:""}},[e._v("Select one...")]),e._l(e.getMonths,(function(t,i){return r("option",{key:i,domProps:{value:i}},[e._v(e._s(t))])}))],2),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedYear,expression:"selectedYear"}],on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedYear=t.target.multiple?r:r[0]},function(t){return e.filter()}]}},e._l(e.years,(function(t,i){return r("option",{key:i,domProps:{value:t}},[e._v(e._s(t))])})),0),r("span",[e._v(" — OR — ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"text",placeholder:"Search titles, authors..."},domProps:{value:e.query},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)},input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),r("button",{on:{click:e.clear}},[e._v("Clear")])])},d=[],v=(r("fb6a"),{name:"ArchiveFilter",data:function(){return{months:["January","February","March","April","May","June","July","August","September","October","November","December"],years:[],selectedYear:2020,selectedMonth:0,query:""}},mounted:function(){var e=2019,t=new Date,r=t.getFullYear();this.selectedYear=r,this.selectedMonth=t.getMonth();for(var i=e;i<=r;i++)this.years.push(i)},computed:{getMonths:function(){var e=new Date;if(this.selectedYear==e.getFullYear()){var t=e.getMonth();return this.months.slice(0,t+1)}return this.months}},methods:{filter:function(){var e={month:this.selectedMonth,year:this.selectedYear};this.$emit("filter",e),console.log("Emitted filter",e)},search:function(){var e=this.query;this.$emit("search",e),console.log("Emitted search",e)},clear:function(){this.$emit("clear"),this.query="";var e=new Date,t=e.getFullYear();this.selectedYear=t,this.selectedMonth=e.getMonth()}}}),p=v,m=(r("90e7"),Object(l["a"])(p,f,d,!1,null,"d57d3438",null)),g=m.exports,b=r("9c4f"),_={name:"ArchiveList",components:{ArticleItem:h,ArchiveFilter:g},props:{user:Object},data:function(){return{articles:[]}},mounted:function(){this.loadArticles()},methods:{loadArticles:function(){var e=this,t=b["a"]+"/articles";this.axios.get(t).then((function(t){e.articles=t.data.articles}))},filter:function(e){var t=this,r=b["a"]+"/filter";this.axios.post(r,e).then((function(e){var r=e.data.articles;r&&(t.articles=r)})).catch((function(e){console.log("Server error: "+e)}))},search:function(e){var t=this,r=b["a"]+"/search";this.axios.post(r,{query:e}).then((function(e){var r=e.data.articles;r&&(t.articles=r)})).catch((function(e){console.log("Server error: "+e)}))},clear:function(){this.loadArticles()}}},y=_,A=(r("3f79"),Object(l["a"])(y,i,n,!1,null,"1f833aaa",null));t["a"]=A.exports},2760:function(e,t,r){},"3c13":function(e,t,r){"use strict";var i=r("4b17"),n=r.n(i);n.a},"3f41":function(e,t,r){},"3f79":function(e,t,r){"use strict";var i=r("3f41"),n=r.n(i);n.a},"4b17":function(e,t,r){},8418:function(e,t,r){"use strict";var i=r("c04e"),n=r("9bf2"),a=r("5c6c");e.exports=function(e,t,r){var c=i(t);c in e?n.f(e,c,a(0,r)):e[c]=r}},"90e7":function(e,t,r){"use strict";var i=r("2760"),n=r.n(i);n.a},fb6a:function(e,t,r){"use strict";var i=r("23e7"),n=r("861d"),a=r("e8b5"),c=r("23cb"),s=r("50c4"),o=r("fc6a"),l=r("8418"),u=r("b622"),h=r("1dde"),f=r("ae40"),d=h("slice"),v=f("slice",{ACCESSORS:!0,0:0,1:2}),p=u("species"),m=[].slice,g=Math.max;i({target:"Array",proto:!0,forced:!d||!v},{slice:function(e,t){var r,i,u,h=o(this),f=s(h.length),d=c(e,f),v=c(void 0===t?f:t,f);if(a(h)&&(r=h.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?n(r)&&(r=r[p],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return m.call(h,d,v);for(i=new(void 0===r?Array:r)(g(v-d,0)),u=0;d<v;d++,u++)d in h&&l(i,u,h[d]);return i.length=u,i}})}}]);
//# sourceMappingURL=about.82cfe4e9.js.map