{"version":3,"sources":["webpack:///./src/views/Applications.vue?871b","webpack:///src/views/Applications.vue","webpack:///./src/views/Applications.vue?9837","webpack:///./src/views/Applications.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","_l","application","key","_id","on","$event","select","_s","name","selected","email","datify","created_at","submission","approved","_e","approve","staticRenderFns","data","applications","props","user","Object","loadingAuth","Boolean","mounted","checkAuth","methods","loadApplications","$router","push","axios","get","url","apps","self","d","toDateString","put","body","app","console","log","response","error","watch","val","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIM,GAAG,kBAAkBN,EAAIO,GAAIP,EAAgB,cAAE,SAASQ,GAAa,OAAOJ,EAAG,MAAM,CAACK,IAAID,EAAYE,KAAK,CAACN,EAAG,IAAI,CAACO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOZ,EAAIa,OAAOL,MAAgB,CAACR,EAAIM,GAAGN,EAAIc,GAAGN,EAAYO,cAAcf,EAAY,SAAEI,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIM,GAAGN,EAAIc,GAAGd,EAAIgB,SAASD,SAASX,EAAG,IAAI,CAACJ,EAAIM,GAAGN,EAAIc,GAAGd,EAAIgB,SAASC,UAAUb,EAAG,IAAI,CAACJ,EAAIM,GAAG,aAAaN,EAAIc,GAAGd,EAAIkB,OAAOlB,EAAIgB,SAASG,gBAAgBf,EAAG,IAAI,CAACJ,EAAIM,GAAGN,EAAIc,GAAGd,EAAIgB,SAASI,eAAiBpB,EAAIgB,SAASK,SAAiHrB,EAAIsB,KAA3GlB,EAAG,SAAS,CAACO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOZ,EAAIuB,QAAQvB,EAAIgB,SAASN,QAAQ,CAACV,EAAIM,GAAG,eAAwBN,EAAIsB,MAAM,IACntBE,EAAkB,G,YCkBtB,GACET,KAAM,eACNU,KAFF,WAGI,MAAO,CACLC,aAAc,GACdV,SAAU,OAGdW,MAAO,CACLC,KAAMC,OACNC,YAAaC,SAEfC,QAZF,WAaI/B,KAAKgC,UAAUhC,KAAK6B,YAAa7B,KAAK2B,OAGxCM,QAAS,CACPD,UADJ,SACA,KACWH,IACEF,EAGH3B,KAAKkC,mBAFLlC,KAAKmC,QAAQC,KAAK,CAA5B,kBAOIF,iBAXJ,WAYM,IAAN,OACA,yBACMlC,KAAKqC,MAAMC,IAAIC,GACrB,kBACQ,IAAR,cACYC,EACFC,EAAKhB,aAAee,EAEpBC,EAAKN,QAAQC,KAAK,CAA5B,mBAGA,mBACQK,EAAKN,QAAQC,KAAK,CAA1B,oBAIIxB,OA5BJ,SA4BA,GACMZ,KAAKe,SAAWR,GAGlBU,OAhCJ,SAgCA,GACM,IAAN,cACM,OAAOyB,EAAEC,gBAGXrB,QArCJ,SAqCA,GACM,IAAN,4BACA,GACQF,UAAU,GAGZpB,KAAKqC,MAAMO,IAAIL,EAAKM,GAC1B,kBACQ,IAAR,aACaC,GACHC,QAAQC,IAAI,SAAUC,MAGhC,mBACQF,QAAQC,IAAI,SAAUE,QAI5BC,MAAO,CACLtB,YAAa,SAAjB,GACM7B,KAAKgC,UAAUoB,EAAKpD,KAAK2B,SC5FuT,I,YCOlV0B,EAAY,eACd,EACAvD,EACAyB,GACA,EACA,KACA,KACA,MAIa,aAAA8B,E","file":"js/chunk-2d0e9bce.6cfe8712.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"Applications\")]),_vm._l((_vm.applications),function(application){return _c('div',{key:application._id},[_c('p',{on:{\"click\":function($event){return _vm.select(application)}}},[_vm._v(_vm._s(application.name))])])}),(_vm.selected)?_c('div',[_c('h2',[_vm._v(_vm._s(_vm.selected.name))]),_c('p',[_vm._v(_vm._s(_vm.selected.email))]),_c('p',[_vm._v(\"Submitted \"+_vm._s(_vm.datify(_vm.selected.created_at)))]),_c('p',[_vm._v(_vm._s(_vm.selected.submission))]),(!_vm.selected.approved)?_c('button',{on:{\"click\":function($event){return _vm.approve(_vm.selected._id)}}},[_vm._v(\"Approve\")]):_vm._e()]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h1>Applications</h1>\r\n    <div v-for=\"application in applications\" :key=\"application._id\">\r\n      <p @click=\"select(application)\">{{ application.name }}</p>\r\n    </div>\r\n    <div v-if=\"selected\">\r\n      <h2>{{ selected.name }}</h2>\r\n      <p>{{ selected.email }}</p>\r\n      <p>Submitted {{ datify(selected.created_at) }}</p>\r\n      <p>{{ selected.submission }}</p>\r\n      <button v-if=\"!selected.approved\" @click=\"approve(selected._id)\">Approve</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {http} from '../../global';\r\n\r\nexport default {\r\n  name: 'Applications',\r\n  data() {\r\n    return {\r\n      applications: [],\r\n      selected: null\r\n    }\r\n  },\r\n  props: {\r\n    user: Object,\r\n    loadingAuth: Boolean\r\n  },\r\n  mounted() {\r\n    this.checkAuth(this.loadingAuth, this.user);\r\n  },\r\n\r\n  methods: {\r\n    checkAuth(loadingAuth, user) {\r\n      if (!loadingAuth) {\r\n        if (!user) {\r\n          this.$router.push({name: 'signIn'});\r\n        } else {\r\n          this.loadApplications();\r\n        }\r\n      }\r\n    },\r\n\r\n    loadApplications() {\r\n      const self = this;\r\n      const url = http + \"/applications\"\r\n      this.axios.get(url)\r\n      .then((response) => {\r\n        const apps = response.data.apps;\r\n        if (apps) {\r\n          self.applications = apps;\r\n        } else {\r\n          self.$router.push({name: 'signIn'});\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        self.$router.push({name: 'signIn'});\r\n      })\r\n    },\r\n\r\n    select(application) {\r\n      this.selected = application;\r\n    },\r\n\r\n    datify(str) {\r\n      const d = new Date(str);\r\n      return d.toDateString();\r\n    },\r\n\r\n    approve(id) {\r\n      const url = http + \"/applications/\" + id;\r\n      const body = {\r\n        approved: true\r\n      };\r\n      let self = this;\r\n      this.axios.put(url, body)\r\n      .then((response) => {\r\n        const app = response.data.app;\r\n        if (!app) {\r\n          console.log(\"Failed\", response);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Failed\", error);\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    loadingAuth: function(val) {\r\n      this.checkAuth(val, this.user);\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Applications.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Applications.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Applications.vue?vue&type=template&id=566e095d&\"\nimport script from \"./Applications.vue?vue&type=script&lang=js&\"\nexport * from \"./Applications.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}