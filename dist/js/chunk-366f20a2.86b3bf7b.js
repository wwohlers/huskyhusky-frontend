(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-366f20a2"],{1276:function(e,t,i){"use strict";var n=i("d784"),r=i("44e7"),a=i("825a"),s=i("1d80"),c=i("4840"),l=i("8aa5"),o=i("50c4"),u=i("14c3"),d=i("9263"),h=i("d039"),f=[].push,v=Math.min,p=4294967295,g=!h((function(){return!RegExp(p,"y")}));n("split",2,(function(e,t,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var n=String(s(this)),a=void 0===i?p:i>>>0;if(0===a)return[];if(void 0===e)return[n];if(!r(e))return t.call(n,e,a);var c,l,o,u=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,g=new RegExp(e.source,h+"g");while(c=d.call(g,n)){if(l=g.lastIndex,l>v&&(u.push(n.slice(v,c.index)),c.length>1&&c.index<n.length&&f.apply(u,c.slice(1)),o=c[0].length,v=l,u.length>=a))break;g.lastIndex===c.index&&g.lastIndex++}return v===n.length?!o&&g.test("")||u.push(""):u.push(n.slice(v)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:t.call(this,e,i)}:t,[function(t,i){var r=s(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r,i):n.call(String(r),t,i)},function(e,r){var s=i(n,e,this,r,n!==t);if(s.done)return s.value;var d=a(e),h=String(this),f=c(d,RegExp),m=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),x=new f(g?d:"^(?:"+d.source+")",b),y=void 0===r?p:r>>>0;if(0===y)return[];if(0===h.length)return null===u(x,h)?[h]:[];var _=0,E=0,A=[];while(E<h.length){x.lastIndex=g?E:0;var P,S=u(x,g?h:h.slice(E));if(null===S||(P=v(o(x.lastIndex+(g?0:E)),h.length))===_)E=l(h,E,m);else{if(A.push(h.slice(_,E)),A.length===y)return A;for(var w=1;w<=S.length-1;w++)if(A.push(S[w]),A.length===y)return A;E=_=P}}return A.push(h.slice(_)),A}]}),!g)},"14c3":function(e,t,i){var n=i("c6b6"),r=i("9263");e.exports=function(e,t){var i=e.exec;if("function"===typeof i){var a=i.call(e,t);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"22b8":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"archive-list"},[i("ArchiveFilter",{staticClass:"filter",on:{filter:e.filter,search:e.search,clear:e.clear}}),e._l(e.articles,(function(t){return i("ArticleItem",{key:t.id,attrs:{user:e.user,article:t}})}))],2)},r=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"article-item"},[i("div",{staticClass:"item-child"},[i("img",{attrs:{src:e.article.image},on:{click:e.go}})]),i("div",{staticClass:"item-child",on:{click:e.go}},[i("span",{staticClass:"title"},[e._v(e._s(e.article.title))]),i("p",{staticClass:"brief"},[e._v(e._s(e.article.brief))])]),e.editRights?i("div",{staticClass:"item-child"},[i("button",{on:{click:e.write}},[e._v("Edit")]),e.suggestPublication?i("span",[e._v("Publication requested")]):e._e()]):e._e()])},s=[],c=(i("b0c0"),i("d3b7"),i("25f0"),{name:"ArticleItem",props:{article:Object,user:Object},computed:{articleLink:function(){return"/article/"+this.article.name},editRights:function(){return!!this.user&&(!!this.user.admin||this.user._id.toString()==this.article.author.toString())},writeLink:function(){return"/write/"+this.article._id},suggestPublication:function(){return this.article.requested&&!this.article.public}},methods:{go:function(){this.$router.push({name:"article",params:{name:this.article.name}})},write:function(){this.$router.push({name:"write",params:{id:this.article._id}})}}}),l=c,o=(i("3c13"),i("2877")),u=Object(o["a"])(l,a,s,!1,null,"5a61d6f0",null),d=u.exports,h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedMonth,expression:"selectedMonth"}],on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedMonth=t.target.multiple?i:i[0]},function(t){return e.filter()}]}},[i("option",{attrs:{disabled:"",value:""}},[e._v("Select one...")]),e._l(e.getMonths,(function(t,n){return i("option",{key:n,domProps:{value:n}},[e._v(e._s(t))])}))],2),i("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedYear,expression:"selectedYear"}],on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedYear=t.target.multiple?i:i[0]},function(t){return e.filter()}]}},e._l(e.years,(function(t,n){return i("option",{key:n,domProps:{value:t}},[e._v(e._s(t))])})),0),i("span",[e._v(" — OR — ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"text",placeholder:"Search titles, authors..."},domProps:{value:e.query},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)},input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),i("button",{on:{click:e.clear}},[e._v("Clear")])])},f=[],v=(i("fb6a"),{name:"ArchiveFilter",data:function(){return{months:["January","February","March","April","May","June","July","August","September","October","November","December"],years:[],selectedYear:2020,selectedMonth:0,query:""}},mounted:function(){var e=2019,t=new Date,i=t.getFullYear();this.selectedYear=i,this.selectedMonth=t.getMonth();for(var n=e;n<=i;n++)this.years.push(n)},computed:{getMonths:function(){var e=new Date;if(this.selectedYear==e.getFullYear()){var t=e.getMonth();return this.months.slice(0,t+1)}return this.months}},methods:{filter:function(){var e={month:this.selectedMonth,year:this.selectedYear};this.$emit("filter",e),console.log("Emitted filter",e)},search:function(){var e=this.query;this.$emit("search",e),console.log("Emitted search",e)},clear:function(){this.$emit("clear"),this.query="";var e=new Date,t=e.getFullYear();this.selectedYear=t,this.selectedMonth=e.getMonth()}}}),p=v,g=(i("90e7"),Object(o["a"])(p,h,f,!1,null,"d57d3438",null)),m=g.exports,b=i("9c4f"),x={name:"ArchiveList",components:{ArticleItem:d,ArchiveFilter:m},props:{user:Object},data:function(){return{articles:[]}},mounted:function(){this.loadArticles()},methods:{loadArticles:function(){var e=this,t=b["a"]+"/articles";this.axios.get(t).then((function(t){e.articles=t.data.articles}))},filter:function(e){var t=this,i=b["a"]+"/filter";this.axios.post(i,e).then((function(e){var i=e.data.articles;i&&(t.articles=i)})).catch((function(e){console.log("Server error: "+e)}))},search:function(e){var t=this,i=b["a"]+"/search";this.axios.post(i,{query:e}).then((function(e){var i=e.data.articles;i&&(t.articles=i)})).catch((function(e){console.log("Server error: "+e)}))},clear:function(){this.loadArticles()}}},y=x,_=(i("3f79"),Object(o["a"])(y,n,r,!1,null,"1f833aaa",null));t["a"]=_.exports},2760:function(e,t,i){},"3c13":function(e,t,i){"use strict";var n=i("4b17"),r=i.n(n);r.a},"3f41":function(e,t,i){},"3f79":function(e,t,i){"use strict";var n=i("3f41"),r=i.n(n);r.a},"44e7":function(e,t,i){var n=i("861d"),r=i("c6b6"),a=i("b622"),s=a("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==r(e))}},"4b17":function(e,t,i){},5319:function(e,t,i){"use strict";var n=i("d784"),r=i("825a"),a=i("7b0b"),s=i("50c4"),c=i("a691"),l=i("1d80"),o=i("8aa5"),u=i("14c3"),d=Math.max,h=Math.min,f=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,g=function(e){return void 0===e?e:String(e)};n("replace",2,(function(e,t,i,n){var m=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=n.REPLACE_KEEPS_$0,x=m?"$":"$0";return[function(i,n){var r=l(this),a=void 0==i?void 0:i[e];return void 0!==a?a.call(i,r,n):t.call(String(r),i,n)},function(e,n){if(!m&&b||"string"===typeof n&&-1===n.indexOf(x)){var a=i(t,e,this,n);if(a.done)return a.value}var l=r(e),f=String(this),v="function"===typeof n;v||(n=String(n));var p=l.global;if(p){var _=l.unicode;l.lastIndex=0}var E=[];while(1){var A=u(l,f);if(null===A)break;if(E.push(A),!p)break;var P=String(A[0]);""===P&&(l.lastIndex=o(f,s(l.lastIndex),_))}for(var S="",w=0,R=0;R<E.length;R++){A=E[R];for(var k=String(A[0]),C=d(h(c(A.index),f.length),0),q=[],I=1;I<A.length;I++)q.push(g(A[I]));var $=A.groups;if(v){var M=[k].concat(q,C,f);void 0!==$&&M.push($);var N=String(n.apply(void 0,M))}else N=y(k,f,C,q,$,n);C>=w&&(S+=f.slice(w,C)+N,w=C+k.length)}return S+f.slice(w)}];function y(e,i,n,r,s,c){var l=n+e.length,o=r.length,u=p;return void 0!==s&&(s=a(s),u=v),t.call(c,u,(function(t,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return i.slice(0,n);case"'":return i.slice(l);case"<":c=s[a.slice(1,-1)];break;default:var u=+a;if(0===u)return t;if(u>o){var d=f(u/10);return 0===d?t:d<=o?void 0===r[d-1]?a.charAt(1):r[d-1]+a.charAt(1):t}c=r[u-1]}return void 0===c?"":c}))}}))},6547:function(e,t,i){var n=i("a691"),r=i("1d80"),a=function(e){return function(t,i){var a,s,c=String(r(t)),l=n(i),o=c.length;return l<0||l>=o?e?"":void 0:(a=c.charCodeAt(l),a<55296||a>56319||l+1===o||(s=c.charCodeAt(l+1))<56320||s>57343?e?c.charAt(l):a:e?c.slice(l,l+2):s-56320+(a-55296<<10)+65536)}};e.exports={codeAt:a(!1),charAt:a(!0)}},8418:function(e,t,i){"use strict";var n=i("c04e"),r=i("9bf2"),a=i("5c6c");e.exports=function(e,t,i){var s=n(t);s in e?r.f(e,s,a(0,i)):e[s]=i}},"8aa5":function(e,t,i){"use strict";var n=i("6547").charAt;e.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},"90e7":function(e,t,i){"use strict";var n=i("2760"),r=i.n(n);r.a},9263:function(e,t,i){"use strict";var n=i("ad6d"),r=i("9f7f"),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,l=function(){var e=/a/,t=/b*/g;return a.call(e,"a"),a.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),o=r.UNSUPPORTED_Y||r.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=l||u||o;d&&(c=function(e){var t,i,r,c,d=this,h=o&&d.sticky,f=n.call(d),v=d.source,p=0,g=e;return h&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),g=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(v="(?: "+v+")",g=" "+g,p++),i=new RegExp("^(?:"+v+")",f)),u&&(i=new RegExp("^"+v+"$(?!\\s)",f)),l&&(t=d.lastIndex),r=a.call(h?i:d,g),h?r?(r.input=r.input.slice(p),r[0]=r[0].slice(p),r.index=d.lastIndex,d.lastIndex+=r[0].length):d.lastIndex=0:l&&r&&(d.lastIndex=d.global?r.index+r[0].length:t),u&&r&&r.length>1&&s.call(r[0],i,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(r[c]=void 0)})),r}),e.exports=c},"9f7f":function(e,t,i){"use strict";var n=i("d039");function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,i){"use strict";var n=i("23e7"),r=i("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},caad:function(e,t,i){"use strict";var n=i("23e7"),r=i("4d64").includes,a=i("44d2"),s=i("ae40"),c=s("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!c},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},d784:function(e,t,i){"use strict";i("ac1f");var n=i("6eeb"),r=i("d039"),a=i("b622"),s=i("9263"),c=i("9112"),l=a("species"),o=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=a("replace"),h=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));e.exports=function(e,t,i,d){var v=a(e),p=!r((function(){var t={};return t[v]=function(){return 7},7!=""[e](t)})),g=p&&!r((function(){var t=!1,i=/a/;return"split"===e&&(i={},i.constructor={},i.constructor[l]=function(){return i},i.flags="",i[v]=/./[v]),i.exec=function(){return t=!0,null},i[v](""),!t}));if(!p||!g||"replace"===e&&(!o||!u||h)||"split"===e&&!f){var m=/./[v],b=i(v,""[e],(function(e,t,i,n,r){return t.exec===s?p&&!r?{done:!0,value:m.call(t,i,n)}:{done:!0,value:e.call(i,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),x=b[0],y=b[1];n(String.prototype,e,x),n(RegExp.prototype,v,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}d&&c(RegExp.prototype[v],"sham",!0)}},ed6a:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user?i("div",[i("h1",[e._v("Edit Article")]),i("link",{attrs:{href:"https://cdn.quilljs.com/1.2.6/quill.snow.css",rel:"stylesheet"}}),i("form",{staticClass:"center",on:{submit:function(e){e.preventDefault()}}},[e.errorMessage?i("span",[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),i("br"),i("div",{staticClass:"form-item"},[i("label",{attrs:{for:"name"}},[e._v("Name")]),e._v(" thehuskyhusky.com/article/"),i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticStyle:{display:"inline-block"},attrs:{type:"text",id:"name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),i("div",{staticClass:"form-item"},[i("label",{attrs:{for:"title"}},[e._v("Title")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{type:"text",id:"title"},domProps:{value:e.title},on:{input:[function(t){t.target.composing||(e.title=t.target.value)},e.generateName]}})]),i("div",{staticClass:"form-item"},[i("label",{attrs:{for:"brief"}},[e._v("Brief")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.brief,expression:"brief"}],attrs:{type:"text",id:"brief"},domProps:{value:e.brief},on:{input:function(t){t.target.composing||(e.brief=t.target.value)}}})]),i("div",{staticClass:"form-item"},[i("label",{attrs:{for:"image"}},[e._v("Image")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.image,expression:"image"}],attrs:{type:"text",id:"image"},domProps:{value:e.image},on:{input:function(t){t.target.composing||(e.image=t.target.value)}}})]),i("div",{staticClass:"form-item"},[i("quill",{attrs:{output:"html"},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),i("div",{staticClass:"form-item"},[e.isPublic?i("span",[e._v("Public. "),i("button",{on:{click:e.togglePublic}},[e._v("Unpublish")])]):i("span",[e._v("Not public. "),e.requested?i("span",[e._v(" Publication has been requested. "),e.user.admin?i("button",{on:{click:e.togglePublic}},[e._v("Publish")]):i("button",{on:{click:e.toggleRequested}},[e._v("Rescind Publication Request")])]):i("span",[e._v(" Publication has NOT been requested. "),e.user.admin?i("button",{on:{click:e.togglePublic}},[e._v("Publish Anyway")]):i("button",{on:{click:e.toggleRequested}},[e._v("Request Publication")])])])]),i("div",{staticClass:"form-item"},[i("p",[e._v('Note: all changes, including changes to publicity, do not take effect until you click "Save".')]),i("button",{on:{click:e.save}},[e._v("Save")])])])]):e._e()},r=[],a=(i("caad"),i("b0c0"),i("ac1f"),i("5319"),i("1276"),i("22b8"),i("9c4f")),s={name:"Write",props:{user:Object,loadingAuth:{type:Boolean,default:!0}},data:function(){return{name:"",title:"",brief:"",image:"",content:"Start writing here...",isPublic:!1,requested:!1,errorMessage:""}},methods:{load:function(){if(this.user){var e=this,t=this.$route.params.id,i=a["a"]+"/articlebyid/"+t;this.axios.get(i).then((function(t){var i=t.data.article;i?(e.name=i.name,e.title=i.title,e.brief=i.brief,e.image=i.image,e.isPublic=i.public,e.requested=i.requested,e.setInnerHtml(i.text)):e.$router.push({name:"archive"})})).catch((function(t){console.log(t),e.$router.push({name:"archive"})}))}else this.$router.push({name:"signIn"})},save:function(){var e=this;if(this.validate()){var t=a["a"]+"/articles/"+this.$route.params.id,i={name:this.name,title:this.title,brief:this.brief,image:this.image,text:this.content,public:this.isPublic,requested:this.requested};this.axios.put(t,i).then((function(t){t.data.article?e.$router.push({name:"archive"}):console.log("Failed")})).catch((function(e){console.log("Failed with error: "+e)}))}},setInnerHtml:function(e){var t=document.getElementsByClassName("ql-editor");t[0].innerHTML=e},generateName:function(){this.name=this.title.replace(/\s+/g,"-").toLowerCase()},togglePublic:function(){this.isPublic=!this.isPublic},toggleRequested:function(){this.requested=!this.requested},validate:function(){var e=this,t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","!","#","$","%","&","*","(",")","+","="],i=this.name.split("");if(i.length>=100)return this.errorMessage="Name cannot be more than 100 characters",!1;for(var n=0;n<i.length;n++)if(!t.includes(i[n]))return this.errorMessage="Name contains invalid characters",!1;var r=a["a"]+"/articles/"+this.name;return this.axios.get(r).then((function(t){if(t.data.article)return e.errorMessage="Name is not unique",!1})).catch((function(e){})),!(this.title.length>=100)||(this.errorMessage="Title cannot be more than 100 characters",!1)}},mounted:function(){this.loadingAuth||this.load()},watch:{loadingAuth:function(e){e||this.load()}}},c=s,l=i("2877"),o=Object(l["a"])(c,n,r,!1,null,null,null);t["default"]=o.exports},fb6a:function(e,t,i){"use strict";var n=i("23e7"),r=i("861d"),a=i("e8b5"),s=i("23cb"),c=i("50c4"),l=i("fc6a"),o=i("8418"),u=i("b622"),d=i("1dde"),h=i("ae40"),f=d("slice"),v=h("slice",{ACCESSORS:!0,0:0,1:2}),p=u("species"),g=[].slice,m=Math.max;n({target:"Array",proto:!0,forced:!f||!v},{slice:function(e,t){var i,n,u,d=l(this),h=c(d.length),f=s(e,h),v=s(void 0===t?h:t,h);if(a(d)&&(i=d.constructor,"function"!=typeof i||i!==Array&&!a(i.prototype)?r(i)&&(i=i[p],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return g.call(d,f,v);for(n=new(void 0===i?Array:i)(m(v-f,0)),u=0;f<v;f++,u++)f in d&&o(n,u,d[f]);return n.length=u,n}})}}]);
//# sourceMappingURL=chunk-366f20a2.86b3bf7b.js.map